<div class="container mx-auto pb-5 mb-5">
    <!-- Top row with username and New Note button -->
    <div class="flex flex-col sm:flex-row sm:justify-start items-start mb-4">
        <!-- Left side: Greeting -->
        <div class="mb-2 sm:mb-0">
            <h1 class="text-3xl sm:text-4xl font-semibold">Hey, <%= userName %></h1>
        </div>
        <!-- Right side: New Note button -->
        <div class="ml-0 sm:ml-4">
            <a href="/dashboard/add" class="px-4 py-2 bg-blue-500 text-white rounded shadow hover:bg-blue-600 transition duration-200 text-sm sm:text-base">+ New Note</a>
        </div>
    </div>

    <!-- Notes display -->
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
        <% if (notes.length > 0) { %>
            <% for (let i = 0; i < notes.length; i++) { %>
                <div class="bg-white border border-blue-500 rounded-lg shadow-md p-4 h-52">
                    <a href="/dashboard/item/<%= notes[i]._id %>" class="no-underline h-full flex flex-col justify-between">
                        <h5 class="text-lg font-bold mb-2 truncate"><%= notes[i].title %></h5>
                        <p class="text-gray-700 flex-1 overflow-hidden"><%= notes[i].body %></p>
                    </a>
                </div>
            <% } %>
        <% } else { %>
            <div class="flex flex-col items-center">
                <img src="/images/human-3.svg" alt="" class="mb-4 w-32 h-32">
                <h2 class="text-xl">Okay...</h2>
                <h4 class="text-lg text-center">Let's start with your first note <br><br>
                    <a href="/dashboard/add" class="text-blue-500 hover:underline">Create one!</a>
                </h4>
            </div>
        <% } %>        
    </div>

    <!-- Pagination -->
    <% if(notes.length > 0) { %>
    <nav aria-label="Page navigation" class="mt-6">
        <ul class="flex justify-center items-center space-x-2">
            <% if(pages == 1) { %>
                <li class="page-item"><a class="text-gray-400 cursor-not-allowed">Previous</a></li>
            <% } else { %>
                <li class="page-item">
                    <a class="text-blue-500 hover:underline" href="/dashboard?page=1">First</a>
                </li>
            <% } %>

            <% let i = (Number(current) > 5 ? Number(current) - 4 : 1) %>
            <% if(i !== 1) { %>
                <li class="page-item"><a class="text-gray-500">...</a></li>
            <% } %>

            <% for(; i <= Number(current) + 4 && i <= pages; i++) { %>
                <li class="page-item">
                    <% if(i == current) { %>
                        <a class="bg-blue-500 text-white rounded w-10 h-10 flex items-center justify-center">
                            <%= i %>
                        </a>
                    <% } else { %>
                        <a class="text-blue-500 hover:underline w-10 h-10 flex items-center justify-center" href="/dashboard?page=<%= i %>">
                            <%= i %>
                        </a>
                    <% } %>
                </li>

                <% if(i == Number(current) + 4 && i < pages) { %>
                    <li class="page-item"><a class="text-gray-500">...</a></li>
                <% } %>
            <% } %>

            <% if(current == pages) { %>
                <li class="disabled"><a class="text-gray-400 cursor-not-allowed">Last</a></li>
            <% } else { %>
                <li class="page-item">
                    <a class="text-blue-500 hover:underline" href="/dashboard?page=<%= pages %>">Next</a>
                </li>
            <% } %>
        </ul>
    </nav>
    <% } %>
</div>
